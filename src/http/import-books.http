### Import Books API Test

# Lấy admin token trước
POST http://localhost:8080/router/auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "admin123"
}

###

# Test import sách đơn lẻ
POST http://localhost:8080/router/book/import-csv
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "books": [
    {
      "title": "Goat Brothers",
      "author": "Colton, Larry",
      "summary": "A compelling story about brotherhood and perseverance in challenging times",
      "category": "History, General",
      "publisher": "Doubleday",
      "price": "8.79",
      "publishDate": "1993-01-01"
    }
  ]
}

###

# Test import nhiều sách (batch)
POST http://localhost:8080/router/book/import-csv
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "books": [
    {
      "title": "The Missing Person",
      "author": "Grumbach, Doris",
      "summary": "A gripping fiction about identity, loss, and the search for meaning",
      "category": "Fiction, General",
      "publisher": "Putnam Pub Group",
      "price": "4.99",
      "publishDate": "1981-03-01"
    },
    {
      "title": "Blood and Guts",
      "author": "Zindell, David",
      "summary": "An intense science fiction novel exploring the depths of human nature",
      "category": "Science Fiction",
      "publisher": "Bantam Books",
      "price": "12.99",
      "publishDate": "1997-06-15"
    },
    {
      "title": "Secrets of the Trade",
      "author": "Smith, John",
      "summary": "A business guide revealing insider strategies for success",
      "category": "Business",
      "publisher": "Business Press",
      "price": "24.99",
      "publishDate": "2020-10-01"
    }
  ]
}

###

# Test với dữ liệu thiếu (để test validation)
POST http://localhost:8080/router/book/import-csv
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "books": [
    {
      "title": "Complete Book",
      "author": "Complete Author",
      "summary": "This book has all required fields",
      "category": "Complete Category",
      "publisher": "Complete Publisher",
      "price": "19.99",
      "publishDate": "2024-01-01"
    },
    {
      "title": "",
      "author": "Incomplete Author",
      "summary": "This book is missing title",
      "category": "Incomplete Category",
      "publisher": "Incomplete Publisher",
      "price": "15.99"
    },
    {
      "title": "Book Without Price",
      "author": "Another Author",
      "summary": "This book is missing price",
      "category": "Another Category",
      "publisher": "Another Publisher"
    }
  ]
}

###

# Test import với dữ liệu CSV format gốc (converted to JSON)
POST http://localhost:8080/router/book/import-csv
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "books": [
    {
      "title": "Goat Brothers",
      "author": "By Colton, Larry",
      "summary": "Set in the wide-open spaces of Montana, this work provides a compelling view of the American heartland.",
      "category": "History, General",
      "publisher": "Doubleday",
      "price": "$8.79",
      "publishDate": "1993-01-01"
    },
    {
      "title": "The Missing Person",
      "author": "By Grumbach, Doris",
      "summary": "This novel explores themes of identity and belonging in post-war America.",
      "category": "Fiction, General", 
      "publisher": "Putnam Pub Group",
      "price": "$4.99",
      "publishDate": "1981-03-01"
    }
  ]
}

###

# Test check sách đã import
GET http://localhost:8080/router/book
Authorization: Bearer {{admin_token}}

###
